<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Transform</title>
  <meta name="description" content="Transform">
  <meta name="author" content="Patrickm4">

  <style>
    .shapes{
      top:50px;
      left:250px;
      height: 250px;
      width: 250px;
      border: 5px solid black;
      transition: transform 2s ease, border-radius 0.5s ease;
    }
    #container{
      position:absolute;
      top: 50%;
      width:100vw;
      display:flex;
      justify-content: center;
      transform: translateY(-50%);
    }
  </style>

</head>

<body>

  <div id="container">
    <div class="shapes">
    </div>
  </div>

  <script>
  let shape = document.getElementsByClassName('shapes')[0];
  let degree = 0;
  let timeId, isCircle = false;

  function rotate() {

    degree += 90;
    shape.style.transform = `rotate(${degree}deg)`;
    if(isCircle){
      shape.style.borderRadius = '0%'
      isCircle = false
    } else {
      shape.style.borderRadius = '50%'
      isCircle = true
    };
  }

  function start() {
    timeId = window.setInterval(rotate, 2000);
  }

  document.addEventListener("visibilitychange", function () {
    if(document.hidden){
      clearInterval(timeId)
    } else {
      start()
    }
  })
  start()
  </script>
</body>
</html>
